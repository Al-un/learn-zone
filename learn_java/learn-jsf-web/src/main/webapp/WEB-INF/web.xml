<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"
         version="3.1" >
    
    <!-- ========== JSF ======================================================== -->
    <!-- JSF: project stage-->
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>DEVELOPMENT</param-value>
    </context-param>
    <!-- JSF: loading order -->
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
        <!-- suggested by BalusC: https://stackoverflow.com/q/45486679/4906586 -->
        <async-supported>true</async-supported>
    </servlet>
    <!-- JSF: pages pattern -->
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
    <!-- JSF: session management -->
    <!-- https://stackoverflow.com/a/24081685/4906586 -->
    <!--    <session-config>
        <cookie-config>
            <name>sessioning</name>
        </cookie-config>
        <tracking-mode>COOKIE</tracking-mode>
    </session-config>-->
    
    <!-- ========== Navigation ================================================= -->
    <!-- Index path -->
    <welcome-file-list>
        <welcome-file>index.xhtml</welcome-file>
    </welcome-file-list>
    
    <!-- Custom resources location: move from /Web Pages/ to /Web Pages/WEB-INF/ -->
    <context-param>
        <param-name>javax.faces.WEBAPP_RESOURCES_DIRECTORY</param-name>
        <param-value>/WEB-INF/resources</param-value>
    </context-param>
    
    <!--
    Saving JSF state is client or server
      - client  : more bandwidth usage, less server memory usage
      - server  : less bandwidth usage, more server memory usage
    http://stackoverflow.com/questions/8471551/what-is-state-saving-method-parameter-in-jsf-2-0
    http://stackoverflow.com/questions/16849128/advantage-and-disadvantage-save-state-in-restore-view-in-client-server-jsf-2
    
    Mojarra 2.1.19 introduced stateless JSF: http://balusc.omnifaces.org/2013/02/stateless-jsf.html 
    via <f:view transient="true">blabla</f:view>
    -->
    <context-param>
        <param-name>javax.server.STATE_SAVING_METHOD</param-name>
        <param-value>server</param-value>
    </context-param>
    
    <!--
    http://stackoverflow.com/questions/4105439/com-sun-faces-numberofviewsinsession-vs-com-sun-faces-numberoflogicalviews/16050424#16050424
    -->
    <context-param>
        <param-name>com.sun.faces.numberOfLogicalViews</param-name>
        <param-value>10</param-value>
    </context-param>
    <context-param>
        <param-name>com.sun.faces.numberOfViewsInSession</param-name>
        <param-value>10</param-value>
    </context-param>
    
    
    <error-page>
        <error-code>404</error-code>
        <location>/WEB-INF/error/404.xhtml</location>
    </error-page>
<!--    <error-page>
        <error-code>403</error-code>
        <location>/WEB-INF/error/403.xhtml</location>
    </error-page>-->
    <error-page>
        <error-code>500</error-code>
        <location>/WEB-INF/error/500.xhtml</location>
    </error-page>
    <!--
    Catch all ViewExpiredException and redirect to a theme-agnostic page
    https://stackoverflow.com/a/3642969/4906586
    https://stackoverflow.com/a/20922591/4906586
    -->
    <!--
    <error-page>
        <exception-type>javax.faces.application.ViewExpiredException</exception-type>
        <location>/WEB-INF/error/view-expired-exception.xhtml</location>
    </error-page>
    -->
    
    <!-- ========== MIME mapping =============================================== -->
    <mime-mapping>
        <extension>ttf</extension>
        <mime-type>application/font-sfnt</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>woff</extension>
        <mime-type>application/font-woff</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>woff2</extension>
        <mime-type>application/font-woff2</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>eot</extension>
        <mime-type>application/vnd.ms-fontobject</mime-type>
    </mime-mapping>
        <mime-mapping>
        <extension>eot?#iefix</extension>
        <mime-type>application/vnd.ms-fontobject</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>svg</extension>
        <mime-type>image/svg+xml</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>svg#fontawesomeregular</extension>
        <mime-type>image/svg+xml</mime-type>
    </mime-mapping>  
    
    <!-- 
    JSF:
        Project stage list:
        link update: http://docs.oracle.com/javaee/6/tutorial/doc/bnaxj.html
    
    Navigation:
        Custom resources folder location
        http://stackoverflow.com/questions/13861612/prevent-direct-access-to-composite-components-by-placing-them-inside-web-inf
   
    
    Security: 
        Force https usage
        http://stackoverflow.com/questions/5513661/https-on-jsf-2-for-protected-resources-and-login
        
    Web listener execution order:
        Declared in web.xml have precedence over annotated
        http://stackoverflow.com/questions/19729370/servletcontextlistener-execution-order
        How to declare listener in web.xml
        https://www.mkyong.com/servlet/what-is-listener-servletcontextlistener-example/
    -->
</web-app>
