<ui:composition template="/WEB-INF/template/base.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html">

    <ui:define name="content">

        <h:form id="form">
            <p:repeat value="#{catalog.list}" var="c">

                <div class="catalog">
                    <div>
                        <p>#{c.name}</p>
                        <p>#{c.description}</p>
                    </div>

                    <p:repeat value="#{c.articles}" var="a">
                        <p>#{a.name} - #{a.description}</p>
                    </p:repeat>

                    <div>

                        <a href="catalog/?id=#{c.id}">Edit</a>
                        <p:commandButton value="Delete" 
                                         action="#{catalog.delete(c)}" 
                                         update=":form"/>
                    </div>
                </div>

            </p:repeat>
        </h:form>

        <a href="catalog/">New catalogue</a>
        <a href="article/">New article</a>

    </ui:define>

</ui:composition>