<html>
  <head>
    <meta charset="utf-8" />
    <title>Learnzone</title>

    <!-- Styles -->
    <link
      rel="stylesheet"
      href="/learnzone/assets/styles/styles.css"
    />
    <link
      rel="stylesheet"
      href="/learnzone/assets/styles/syntax-monokai.css"
    />
  </head>

  <body>
    <header>
      <div class="nav-menu">
        <a href="/learnzone/">Home</a>
        <a href="/learnzone/kx">KX</a>
        <a href="/learnzone/blog">blog</a>
      </div>
    </header>

    <div id="container">
      <div id="content"><h1 id="learning-zone">Learning zone</h1>

<p>Development to learn basics in some web application by testing specific features.</p>

<h1 id="specifications">Specifications</h1>

<p>It basically implements a simple e-commerce structure.</p>

<h3 id="functional">Functional</h3>

<ul>
  <li><a href="https://github.com/Al-un/learnzone/issues/1"><strong>F01</strong>: Minimal CRUD</a></li>
  <li><a href="https://github.com/Al-un/learnzone/issues/2"><strong>F02</strong>: Authentication &amp; Authorization</a></li>
  <li><a href="https://github.com/Al-un/learnzone/issues/3"><strong>F03</strong>: Secure data edition</a></li>
  <li><a href="https://github.com/Al-un/learnzone/issues/4"><strong>F04</strong>: Adding tenancy</a></li>
  <li><a href="https://github.com/Al-un/learnzone/issues/5"><strong>F05</strong>: Priced article publication</a></li>
  <li><a href="https://github.com/Al-un/learnzone/issues/17"><strong>F06</strong>: Products photo</a></li>
  <li><a href="https://github.com/Al-un/learnzone/issues/18"><strong>F07</strong>: notify products crud</a></li>
</ul>

<h3 id="technical">Technical</h3>

<ul>
  <li><a href="https://github.com/Al-un/learnzone/issues/10"><strong>T01</strong>: Minimal configuration</a></li>
  <li><a href="https://github.com/Al-un/learnzone/issues/11"><strong>T02</strong>: Identity management</a></li>
  <li><a href="https://github.com/Al-un/learnzone/issues/12"><strong>T03</strong>: CI/CD</a></li>
  <li><a href="https://github.com/Al-un/learnzone/issues/13"><strong>T04</strong>: Logging</a></li>
  <li><a href="https://github.com/Al-un/learnzone/issues/14"><strong>T05</strong>: Testing</a></li>
  <li><a href="https://github.com/Al-un/learnzone/issues/15"><strong>T06</strong>: Code quality</a></li>
  <li><a href="https://github.com/Al-un/learnzone/issues/16"><strong>T07</strong>: Documentation</a></li>
  <li><a href="https://github.com/Al-un/learnzone/issues/19"><strong>T08</strong>: Websocket</a></li>
</ul>

<h3 id="design">Design</h3>

<ul>
  <li><a href="https://github.com/Al-un/learnzone/issues/6"><strong>S01</strong> SASS</a></li>
  <li><a href="https://github.com/Al-un/learnzone/issues/7"><strong>S02</strong> SASS update</a></li>
  <li><a href="https://github.com/Al-un/learnzone/issues/8"><strong>S03</strong> Sidemenu</a></li>
  <li><a href="https://github.com/Al-un/learnzone/issues/9"><strong>S04</strong> Bootstrap</a></li>
</ul>

<h1 id="landscape">Landscape</h1>

<h3 id="deployments">Deployments</h3>

<p>whenever possible, apps are deployed on Heroku:</p>

<table>
  <thead>
    <tr>
      <th>Role</th>
      <th>Stack</th>
      <th>Deployment</th>
      <th>Repository</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Database</td>
      <td>PostgreSQL</td>
      <td>https://learnzone-postgresql.herokuapp.com/</td>
      <td>(none)</td>
    </tr>
    <tr>
      <td>Fullstack</td>
      <td>Java / JSF</td>
      <td>not deployed</td>
      <td><a href="https://github.com/Al-un/learn-zone-javaee">learn-zone-javaee</a></td>
    </tr>
    <tr>
      <td>API</td>
      <td>Rails</td>
      <td>https://learnzone-rails-api.herokuapp.com/</td>
      <td><a href="https://github.com/Al-un/learnzone-rails-api">learnzone-rails-api</a></td>
    </tr>
    <tr>
      <td>Fullstack</td>
      <td>Rails</td>
      <td>https://learnzone-rails.herokuapp.com/</td>
      <td><a href="https://github.com/Al-un/learnzone-rails">learnzone-rails</a></td>
    </tr>
    <tr>
      <td>Fullstack</td>
      <td>NodeJs</td>
      <td>https://learnzone-node.herokuapp.com</td>
      <td><a href="https://github.com/Al-un/learnzone-nodejs">learnzone-node</a></td>
    </tr>
    <tr>
      <td>Front-end</td>
      <td>React</td>
      <td>TBD</td>
      <td><a href="https://github.com/Al-un/learnzone-react">learnzone-react</a></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h3 id="shared-third-party-components">Shared third party components</h3>

<p>To avoid copy-pasting links, here are some third party components used in multiple
projects:</p>

<ul>
  <li><a href="https://auth0.com">Auth0</a> (IDaaS)</li>
  <li><a href="https://codeclimate.com/">CodeClimate</a> (code quality)</li>
</ul>

<h3 id="technical-stack">Technical stack</h3>

<h4 id="rails-api">Rails (API)</h4>

<ul>
  <li>T01:
    <ul>
      <li>T01.1: <a href="http://puma.io/">Puma</a></li>
      <li>T01.2: ORM: <a href="https://guides.rubyonrails.org/active_record_querying.html">ActiveRecord</a></li>
      <li>T01.3: Web framework: <a href="https://rubyonrails.org/">Rails</a> <a href="https://guides.rubyonrails.org/api_app.html">API only version</a></li>
    </ul>
  </li>
</ul>

<h4 id="rails-fullstack">Rails (Fullstack)</h4>

<ul>
  <li>T01:
    <ul>
      <li>T01.1: <a href="http://puma.io/">Puma</a></li>
      <li>T01.2: ORM: <a href="https://guides.rubyonrails.org/active_record_querying.html">ActiveRecord</a></li>
      <li>T01.3: Web:
        <ul>
          <li><a href="https://rubyonrails.org/">Rails</a></li>
          <li><a href="https://github.com/rails/sass-rails">sass-rails</a> (SCSS)</li>
          <li><a href="https://github.com/rails/rails/tree/master/actionview/app/assets/javascripts">rails-ujs</a> (Ajax)</li>
        </ul>
      </li>
      <li>T01.4: documented by <a href="https://yardoc.org/">Yard</a></li>
      <li>T01.5: routed <a href="https://guides.rubyonrails.org/routing.html">ActionDispatch</a></li>
      <li>T01.6</li>
    </ul>
  </li>
  <li>T02:
    <ul>
      <li>Auth0</li>
      <li>Authenticate:
        <ul>
          <li><a href="https://github.com/omniauth/omniauth">OmniAuth</a></li>
          <li><a href="https://github.com/auth0/omniauth-auth0">OmniAuth-Auth0</a></li>
        </ul>
      </li>
      <li>Verify:
        <ul>
          <li><a href="https://github.com/jwt/ruby-jwt">jwt</a> (API)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>T03:
    <ul>
      <li>Travis <a href="https://travis-ci.com/Al-un/learn-zone-rails"><img src="https://travis-ci.com/Al-un/learn-zone-rails.svg?branch=master" alt="Build Status" /></a></li>
    </ul>
  </li>
  <li>T04:
    <ul>
      <li>Logging
        <ul>
          <li><a href="https://github.com/roidrage/lograge">Lograge</a></li>
          <li><a href="https://github.com/iMacTia/lograge-sql">Lograge-sql</a></li>
          <li><a href="https://github.com/tilfin/ougai">Ougai</a></li>
          <li>Tested but not used: Rails default logger, <a href="https://github.com/TwP/logging">Logging</a></li>
        </ul>
      </li>
      <li>Log aggregation
        <ul>
          <li><a href="https://www.loggly.com/">Loggly</a> via <a href="https://github.com/freeformz/logglier">Logglier</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>T05: Testing
    <ul>
      <li><a href="http://rspec.info/">RSpec</a> (testing library)</li>
      <li><a href="https://github.com/thoughtbot/factory_bot">FactoryBot</a> (entity factories)</li>
      <li><a href="https://github.com/DatabaseCleaner/database_cleaner">Database Cleaner</a></li>
      <li>[SimpleCov] (test coverage)</li>
    </ul>
  </li>
  <li>T06: Code quality: Code Climate
    <ul>
      <li><a href="https://codeclimate.com/github/Al-un/learn-zone-rails/maintainability"><img src="https://api.codeclimate.com/v1/badges/a1cd2c7d60769ef7a1b9/maintainability" alt="Maintainability" /></a></li>
      <li><a href="https://codeclimate.com/github/Al-un/learn-zone-rails/test_coverage"><img src="https://api.codeclimate.com/v1/badges/a1cd2c7d60769ef7a1b9/test_coverage" alt="Test Coverage" /></a></li>
      <li>Using <a href="https://github.com/colszowka/simplecov">SimpleCov</a> (<a href="https://medium.com/the-code-review/display-your-ruby-test-coverage-using-simplecov-gem-and-codeclimate-6db6336fe409">guide</a>)</li>
    </ul>
  </li>
</ul>

<h4 id="nodejs">Node.js</h4>

<ul>
  <li>T01:
    <ul>
      <li>T01.1: <code class="highlighter-rouge">?</code></li>
      <li>T01.2: ORM: <a href="http://docs.sequelizejs.com/">Sequelize</a></li>
      <li>T01.3: Web framework:
        <ul>
          <li><a href="https://github.com/expressjs/method-override">Method-override</a> to handle <code class="highlighter-rouge">PUT</code> and <code class="highlighter-rouge">DELETE</code> forms</li>
          <li><a href="https://expressjs.com/">Express</a></li>
          <li><a href="https://www.npmjs.com/package/body-parser">Body-parser</a></li>
          <li><a href="https://handlebarsjs.com/">Handlebars</a></li>
          <li><a href="https://github.com/ericf/express-handlebars">Express-handlebars</a></li>
          <li><a href="https://github.com/sass/node-sass">Node-sass</a> (SCSS)</li>
          <li><a href="https://nodemon.io/">Nodemon</a> (local hot deploy. <code class="highlighter-rouge">npm run dev</code>
instead of <code class="highlighter-rouge">npm start</code> from <a href="https://dev.to/whoisryosuke/nextjs-tip-hot-reloading-for-dynamic-servers-43ed">this guide</a>)</li>
        </ul>
      </li>
      <li>T01.4: ? documentation</li>
      <li>T01.5: routed by Express</li>
    </ul>
  </li>
  <li>T02:
    <ul>
      <li>Auth0</li>
      <li>Authenticate:
        <ul>
          <li><a href="http://www.passportjs.org/">Passport</a></li>
          <li><a href="https://github.com/auth0/passport-auth0">Passport-Auth0</a></li>
          <li><a href="https://www.npmjs.com/package/express-session">Express-session</a></li>
        </ul>
      </li>
      <li>Verify:
        <ul>
          <li><a href="">Express-jwt</a></li>
          <li><a href="">Jwks-rsa</a></li>
          <li><a href="">Express-jwt-authz</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>T03:
    <ul>
      <li>Travis <a href="https://travis-ci.com/Al-un/learn-zone-rails"><img src="https://travis-ci.com/Al-un/learn-zone-rails.svg?branch=master" alt="Build Status" /></a></li>
    </ul>
  </li>
  <li>T04:</li>
  <li>T05:
    <ul>
      <li><a href="https://istanbul.js.org/">Istanbul</a></li>
    </ul>
  </li>
  <li>T06: Code Climate
    <ul>
      <li><a href="https://codeclimate.com/github/Al-un/learn-zone-nodejs/maintainability"><img src="https://api.codeclimate.com/v1/badges/b417fe74ebe4a8870cc8/maintainability" alt="Maintainability" /></a></li>
      <li><a href="https://codeclimate.com/github/Al-un/learn-zone-nodejs/test_coverage"><img src="https://api.codeclimate.com/v1/badges/b417fe74ebe4a8870cc8/test_coverage" alt="Test Coverage" /></a></li>
    </ul>
  </li>
</ul>

<h1 id="notes">Notes</h1>

<h3 id="heroku-git-deploy">Heroku Git deploy</h3>

<p>To deploy a sub folder on Heroku:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git subtree push --prefix rails/api heroku-rails-api master
</code></pre></div></div>

<p>with <code class="highlighter-rouge">heroku-rails-api</code>, the remote connected to the heroku app git repository. In case of fast-forward merge issues, force push with:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git push heroku-rails-api `git subtree split --prefix rails/api/ master`:master --force
</code></pre></div></div>

<p>The error is</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git push using:  heroku-rails-api master
To https://git.heroku.com/learn-rails-api.git
 ! [rejected]        42ec0434bb179af1e134ab73ba852922e92294b9 -&gt; master (non-fast-forward)
error: failed to push some refs to '{git address}
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Integrate the remote changes (e.g.
hint: 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.
</code></pre></div></div>

<p>Source:</p>

<ul>
  <li>https://coderwall.com/p/ssxp5q/heroku-deployment-without-the-app-being-at-the-repo-root-in-a-subfolder</li>
  <li>https://stackoverflow.com/questions/13756055/git-subtree-subtree-up-to-date-but-cant-push</li>
</ul>

<h3 id="heroku-misc">Heroku Misc</h3>

<p>To attach the database to another app</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>heroku addons:attach postgresql-learnzone <span class="nt">-a</span> <span class="o">{</span>app name<span class="o">}</span>
</code></pre></div></div>

<p>Source:</p>

<ul>
  <li>https://devcenter.heroku.com/articles/managing-add-ons</li>
</ul>
</div>
    </div>

    <footer>Some footer</footer>
  </body>
</html>
