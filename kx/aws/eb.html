<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Elastic Beanstalk</title>

    <!-- Styles -->
    <link
      rel="stylesheet"
      href="/learnzone/assets/styles/styles.css"
    />
    <link
      rel="stylesheet"
      href="/learnzone/assets/styles/syntax-monokai.css"
    />
    <!-- FontAwesome -->
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
      integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU"
      crossorigin="anonymous"
    />
  </head>

  <body>
    <header class="container">
      <div class="content">
        <div class="nav-menu">
          
          <a href="/learnzone/">Home</a>
          
          <a href="/learnzone/learnzone">LearnZone</a>
          
          <a href="/learnzone/kx">KX</a>
          
          <a href="/learnzone/blog">Blog</a>
          
        </div>
      </div>
    </header>

    <div id="main-container">
      <main class="container">
        <!-- Each sub-layout must have a "content" class -->
        <div id="page-menu-toggler" class="mobile-only"
  onclick="document.getElementById('page-container').classList.toggle('show-menu');">
  Navigation
</div>

<div id="page-container" class="content">
  <div id="page-menu">

      

      
        
        <nav class="page-nav-group">
          
          
          
          <h4>AWS</h4>

          <div class="page-nav-links">
            
          
            <a href="/learnzone/kx/aws/eb.html" 
            class="page-nav-link active">
              Elastic Beanstalk
            </a>
          
            
          
            <a href="/learnzone/kx/aws/ec2.html" 
            class="page-nav-link ">
              EC2
            </a>
          
            
          
            <a href="/learnzone/kx/aws/rds.html" 
            class="page-nav-link ">
              RDS
            </a>
          
            
          </div>
        </nav>
      
        
        <nav class="page-nav-group">
          
          
          
          <h4>CircleCI</h4>

          <div class="page-nav-links">
            
          
            <a href="/learnzone/kx/circleci/aws.html" 
            class="page-nav-link ">
              AWS
            </a>
          
            
          
            <a href="/learnzone/kx/circleci/config.html" 
            class="page-nav-link ">
              Configuration
            </a>
          
            
          
            <a href="/learnzone/kx/circleci/deploy.html" 
            class="page-nav-link ">
              Workflow and deployment
            </a>
          
            
          </div>
        </nav>
      
        
        <nav class="page-nav-group">
          
          
          
          <h4>CSS / SASS</h4>

          <div class="page-nav-links">
            
          
            <a href="/learnzone/kx/css/bootstrap.html" 
            class="page-nav-link ">
              Bootstrap
            </a>
          
            
          
            <a href="/learnzone/kx/css/flex.html" 
            class="page-nav-link ">
              Flexbox
            </a>
          
            
          
            <a href="/learnzone/kx/css/fonts.html" 
            class="page-nav-link ">
              Fonts
            </a>
          
            
          
            <a href="/learnzone/kx/css/margin-paddding.html" 
            class="page-nav-link ">
              Margin and Padding
            </a>
          
            
          
            <a href="/learnzone/kx/css/table.html" 
            class="page-nav-link ">
              Tables
            </a>
          
            
          
            <a href="/learnzone/kx/css/variable.html" 
            class="page-nav-link ">
              Variable in SASS
            </a>
          
            
          </div>
        </nav>
      
        
        <nav class="page-nav-group">
          
          
          
          <h4>Git</h4>

          <div class="page-nav-links">
            
          
            <a href="/learnzone/kx/git/branch.html" 
            class="page-nav-link ">
              Git branches
            </a>
          
            
          
            <a href="/learnzone/kx/git/content.html" 
            class="page-nav-link ">
              Content versioning
            </a>
          
            
          </div>
        </nav>
      
        
        <nav class="page-nav-group">
          
          
          
          <h4>JavaScript</h4>

          <div class="page-nav-links">
            
          
            <a href="/learnzone/kx/javascript/async.html" 
            class="page-nav-link ">
              Async / await
            </a>
          
            
          
            <a href="/learnzone/kx/javascript/service-workers.html" 
            class="page-nav-link ">
              Service Workers
            </a>
          
            
          
            <a href="/learnzone/kx/javascript/webpack.html" 
            class="page-nav-link ">
              Webpack
            </a>
          
            
          
            <a href="/learnzone/kx/javascript/workbox.html" 
            class="page-nav-link ">
              Workbox
            </a>
          
            
          </div>
        </nav>
      
        
        <nav class="page-nav-group">
          
          
          
          <h4>Jekyll</h4>

          <div class="page-nav-links">
            
          
            <a href="/learnzone/kx/jekyll/filter.html" 
            class="page-nav-link ">
              Filter
            </a>
          
            
          
            <a href="/learnzone/kx/jekyll/markdown.html" 
            class="page-nav-link ">
              Markdown
            </a>
          
            
          </div>
        </nav>
      
        
        <nav class="page-nav-group">
          
          
          
          <h4>Markdown</h4>

          <div class="page-nav-links">
            
          
            <a href="/learnzone/kx/markdown/image.html" 
            class="page-nav-link ">
              Images
            </a>
          
            
          </div>
        </nav>
      
        
        <nav class="page-nav-group">
          
          
          
          <h4>MySQL</h4>

          <div class="page-nav-links">
            
          
            <a href="/learnzone/kx/mysql/index.html" 
            class="page-nav-link ">
              Getting started
            </a>
          
            
          </div>
        </nav>
      
        
        <nav class="page-nav-group">
          
          
          
          <h4>PowerShell</h4>

          <div class="page-nav-links">
            
          
            <a href="/learnzone/kx/powershell/profile.html" 
            class="page-nav-link ">
              Profiles
            </a>
          
            
          </div>
        </nav>
      
        
        <nav class="page-nav-group">
          
          
          
          <h4>Rails</h4>

          <div class="page-nav-links">
            
          
            <a href="/learnzone/kx/rails/active-model-serializers.html" 
            class="page-nav-link ">
              Serialization
            </a>
          
            
          
            <a href="/learnzone/kx/rails/active-storage.html" 
            class="page-nav-link ">
              Active Storage
            </a>
          
            
          
            <a href="/learnzone/kx/rails/routing.html" 
            class="page-nav-link ">
              Routing
            </a>
          
            
          </div>
        </nav>
      
        
        <nav class="page-nav-group">
          
          
          
          <h4>ReactJS</h4>

          <div class="page-nav-links">
            
          
            <a href="/learnzone/kx/react/ci.html" 
            class="page-nav-link ">
              React + CI
            </a>
          
            
          
            <a href="/learnzone/kx/react/documentation.html" 
            class="page-nav-link ">
              Documentation
            </a>
          
            
          
            <a href="/learnzone/kx/react/props.html" 
            class="page-nav-link ">
              Props
            </a>
          
            
          
            <a href="/learnzone/kx/react/redux.html" 
            class="page-nav-link ">
              Redux
            </a>
          
            
          
            <a href="/learnzone/kx/react/saga.html" 
            class="page-nav-link ">
              Saga
            </a>
          
            
          
            <a href="/learnzone/kx/react/test.html" 
            class="page-nav-link ">
              Testing with Jest and Enzyme
            </a>
          
            
          </div>
        </nav>
      
        
        <nav class="page-nav-group">
          
          
          
          <h4>Travis CI</h4>

          <div class="page-nav-links">
            
          
            <a href="/learnzone/kx/travis/deploy.html" 
            class="page-nav-link ">
              Deployment
            </a>
          
            
          
            <a href="/learnzone/kx/travis/encrypt.html" 
            class="page-nav-link ">
              Encrypting variables
            </a>
          
            
          
            <a href="/learnzone/kx/travis/notifications.html" 
            class="page-nav-link ">
              Notifications
            </a>
          
            
          </div>
        </nav>
      
        
        <nav class="page-nav-group">
          
          
          
          <h4>Visual Studio Code</h4>

          <div class="page-nav-links">
            
          
            <a href="/learnzone/kx/vscode/extensions.html" 
            class="page-nav-link ">
              Extensions
            </a>
          
            
          </div>
        </nav>
      
        
        <nav class="page-nav-group">
          
          
          
          <h4>Vue.js</h4>

          <div class="page-nav-links">
            
          
            <a href="/learnzone/kx/vue/pwa.html" 
            class="page-nav-link ">
              Pwa
            </a>
          
            
          
            <a href="/learnzone/kx/vue/routing.html" 
            class="page-nav-link ">
              Routing
            </a>
          
            
          
            <a href="/learnzone/kx/vue/vuepress.html" 
            class="page-nav-link ">
              Vuepress
            </a>
          
            
          
            <a href="/learnzone/kx/vue/vuex.html" 
            class="page-nav-link ">
              Vuex
            </a>
          
            
          </div>
        </nav>
      

  </div>

  <div id="page-content">
    <h1>Elastic Beanstalk</h1>

    <p>Elastic Beanstalk comes up with a CLI</p>

<h2 id="setting-up">Setting up</h2>

<p>Go to EB dashboard page:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Services &gt; Compute &gt; Elastic Beanstalk
</code></pre></div></div>

<h3 id="application">Application</h3>

<p>Create an application. An application can contain multiple environment reflecting
the environment stage of your application. This also allows awesome features such
as URL swapping (pre-production swapping with production)</p>

<p>Click <code class="highlighter-rouge">Create New Application</code> on the top right and give it an appropriate name</p>

<p>Such application will have three tabs on the left:</p>

<ul>
  <li>Environments list (terminated environments disappear after a while)</li>
  <li>Uploaded application versions. You can restore a past deployment from here.
Versions are stored in the Elastic Beanstalk S3 instance under a folder named
after your application</li>
  <li>Environments configurations list</li>
</ul>

<h3 id="environment">Environment</h3>

<p>Create an environment and select the <code class="highlighter-rouge">Web server environment</code>.</p>

<h4 id="basic-configuration">Basic configuration</h4>

<p>Select an appropriate environment name reflecting the environment stag and a subdomain
if available.</p>

<p>Select the platform depending on your application technology.</p>

<p>For now, let’s start with a sample application. The web application will be uploaded
later</p>

<p>Leave the additional aside and hit “Create environment”. Please wait for a while.
Meanwhile, you can jump into the RDS configuration (<em>please check the RDS page</em>)</p>

<p>At this stage, you have a beautiful landing page</p>

<h4 id="extra-configuration">Extra configuration</h4>

<p>When your environment is ready, time to set up some extra configuration. So far
it mainly involves environment variables, especially if your application relies
on it for connecting to the database</p>

<h2 id="eb-cli">EB CLI</h2>

<p>Some CLI utilities to handle AWS Elastic Beanstalk. Cool thing is that it can be
done on your local machine as well as some Continuous Development tool</p>

<h3 id="installation">Installation</h3>

<p>Install EB CLI (<a href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-install.html?icmpid=docs_elasticbeanstalk_console#eb-cli3-install.cli-only">documentation</a>):</p>

<ul>
  <li>Install via Python (here using Python 3+)
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3 <span class="nt">-m</span> pip <span class="nb">install </span>awsebcli <span class="nt">--upgrade</span> <span class="nt">--cli</span>
</code></pre></div>    </div>
  </li>
  <li>Add the user relative script folder to environment variable:
    <ul>
      <li>Something like <code class="highlighter-rouge">%USERPROFILE%\AppData\Roaming\Python\Python36\Scripts</code> on Windows</li>
    </ul>
  </li>
  <li>Check that CLI is available from terminal:
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>eb <span class="nt">--version</span>
</code></pre></div>    </div>
  </li>
  <li>Create an user via <em>AWS IAM</em> to get a <em>aws access id</em> and a <em>aws secret key</em></li>
  <li><a href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-configuration.html">Initialize</a>
the application if it does not exist yet</li>
  <li>To list all environments
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>eb list
</code></pre></div>    </div>
  </li>
  <li>To deploy code to an environment
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>eb deploy <span class="o">{</span>environment name<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>To terminate environment
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>eb delete <span class="o">{</span>environment name<span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="usage">Usage</h3>

<p>Most of the action done via the management console can be done via EB CLI. To start:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>path_to_your_application_repository
eb init
</code></pre></div></div>

<ol>
  <li>Select your region</li>
  <li>If your application already exists, select it to “link” the repository to the application</li>
  <li>Select the default existing environment. You can change it via
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>eb use <span class="o">{</span>new default environment name<span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<p>This will generate a <code class="highlighter-rouge">.elasticbeanstalk/config.yml</code>. Feel free to have a look and
adapt the content if necessary</p>

<p>To deploy the current code:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>eb deploy <span class="o">{</span>environment name<span class="o">}</span>
</code></pre></div></div>

<p><em>Environment name</em> is optional. If omitted, deployment will be done to the selected
default environment</p>

<blockquote>
  <p>Do not forget to assign appropriate environment variables (Rails secrey key,
database url, third party configuration, etc)</p>
</blockquote>

<p>Read <a href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb3-deploy.html">more on <code class="highlighter-rouge">eb deploy</code></a></p>

<h4 id="git-branches">Git branches</h4>

<blockquote>
  <p>To be confirmed, tested blabla</p>
</blockquote>

<p>The EB CLI seems to deploy the currently active git branch. Example:</p>

<ul>
  <li>You are currently on the <em>develop</em> branch</li>
  <li>You have two environment: <em>prod</em> and <em>dev</em></li>
  <li>If you <code class="highlighter-rouge">eb deploy prod</code>, you will deploy your <em>develop</em> to your <em>prod</em> environment</li>
</ul>

<h4 id="ruby-on-rails">Ruby on Rails</h4>

<p>for Ruby, do not forget:</p>

<ul>
  <li>SECRET_KEY_API</li>
  <li>DATABASE_URL</li>
</ul>

<p>If you cannot multiple Ruby version, make sure that Ruby sub-version
(e.g. <em>2.5.1</em> vs <em>2.5.3</em>) does not prevent from deploying</p>


    <hr />

    
      <p>Sources:</p>
      <ul>
         
      </ul>
    

    <div />

     

    <div />

    
      <p>Mentionned:</p>
      <ul>
         
           
          
          <li>
            <a href="/learnzone/2018/12/20/aws-journey.html" >20 Dec 2018 aws journey</a >
          </li>
           
         
           
          
          <li>
            <a href="/learnzone/2019/01/07/elastic-beanstalk-vs-ec2.html" >07 Jan 2019 elastic beanstalk vs ec2</a >
          </li>
           
        
      </ul>
    
  </div>
</div>

      </main>

      <footer class="container"><div class="content"></div></footer>
    </div>
  </body>
</html>
